[
  {
      "isEnabled": true,
      "version": 2,
      "name": "v2.genshinvoice.top",
      "pluginId": "top.genshinvoice.v2",
      "author": "CyberWon",
      "code": "// 请点击保存后在 更多选项按钮(垂直三个点) -> 设置变量 中设置密钥和区域\r\n// Please set the key and region in \"More options\" -> \"Variables\" after clicking save.\r\n\r\nlet server = 'https://v2.genshinvoice.top'\r\nlet tts_config = {}\r\n// 全部voice数据\r\nlet voices = [\"派蒙_ZH\", \"纳西妲_ZH\", \"凯亚_ZH\", \"温迪_ZH\", \"荒泷一斗_ZH\", \"娜维娅_ZH\", \"阿贝多_ZH\", \"钟离_ZH\", \"枫原万叶_ZH\", \"那维莱特_ZH\", \"艾尔海森_ZH\", \"八重神子_ZH\", \"宵宫_ZH\", \"芙宁娜_ZH\", \"迪希雅_ZH\", \"提纳里_ZH\", \"莱依拉_ZH\", \"卡维_ZH\", \"诺艾尔_ZH\", \"赛诺_ZH\", \"林尼_ZH\", \"莫娜_ZH\", \"托马_ZH\", \"神里绫华_ZH\", \"凝光_ZH\", \"北斗_ZH\", \"可莉_ZH\", \"柯莱_ZH\", \"迪奥娜_ZH\", \"莱欧斯利_ZH\", \"芭芭拉_ZH\", \"雷电将军_ZH\", \"珊瑚宫心海_ZH\", \"魈_ZH\", \"五郎_ZH\", \"胡桃_ZH\", \"鹿野院平藏_ZH\", \"安柏_ZH\", \"琴_ZH\", \"重云_ZH\", \"达达利亚_ZH\", \"班尼特_ZH\", \"夜兰_ZH\", \"丽莎_ZH\", \"香菱_ZH\", \"妮露_ZH\", \"刻晴_ZH\", \"珐露珊_ZH\", \"烟绯_ZH\", \"辛焱_ZH\", \"早柚_ZH\", \"迪卢克_ZH\", \"砂糖_ZH\", \"云堇_ZH\", \"久岐忍_ZH\", \"神里绫人_ZH\", \"优菈_ZH\", \"甘雨_ZH\", \"夏洛蒂_ZH\", \"流浪者_ZH\", \"行秋_ZH\", \"夏沃蕾_ZH\", \"戴因斯雷布_ZH\", \"闲云_ZH\", \"白术_ZH\", \"菲谢尔_ZH\", \"申鹤_ZH\", \"九条裟罗_ZH\", \"雷泽_ZH\", \"荧_ZH\", \"空_ZH\", \"嘉明_ZH\", \"菲米尼_ZH\", \"多莉_ZH\", \"迪娜泽黛_ZH\", \"琳妮特_ZH\", \"凯瑟琳_ZH\", \"米卡_ZH\", \"坎蒂丝_ZH\", \"萍姥姥_ZH\", \"罗莎莉亚_ZH\", \"埃德_ZH\", \"爱贝尔_ZH\", \"伊迪娅_ZH\", \"留云借风真君_ZH\", \"瑶瑶_ZH\", \"绮良良_ZH\", \"七七_ZH\", \"式大将_ZH\", \"奥兹_ZH\", \"泽维尔_ZH\", \"哲平_ZH\", \"大肉丸_ZH\", \"托克_ZH\", \"蒂玛乌斯_ZH\", \"昆钧_ZH\", \"欧菲妮_ZH\", \"仆人_ZH\", \"塞琉斯_ZH\", \"言笑_ZH\", \"迈勒斯_ZH\", \"希格雯_ZH\", \"拉赫曼_ZH\", \"阿守_ZH\", \"杜拉夫_ZH\", \"阿晃_ZH\", \"旁白_ZH\", \"克洛琳德_ZH\", \"伊利亚斯_ZH\", \"爱德琳_ZH\", \"埃洛伊_ZH\", \"远黛_ZH\", \"德沃沙克_ZH\", \"玛乔丽_ZH\", \"劳维克_ZH\", \"塞塔蕾_ZH\", \"海芭夏_ZH\", \"九条镰治_ZH\", \"柊千里_ZH\", \"阿娜耶_ZH\", \"千织_ZH\", \"笼钓瓶一心_ZH\", \"回声海螺_ZH\", \"叶德_ZH\", \"卡莉露_ZH\", \"元太_ZH\", \"漱玉_ZH\", \"阿扎尔_ZH\", \"查尔斯_ZH\", \"阿洛瓦_ZH\", \"纳比尔_ZH\", \"莎拉_ZH\", \"迪尔菲_ZH\", \"康纳_ZH\", \"博来_ZH\", \"博士_ZH\", \"玛塞勒_ZH\", \"阿祇_ZH\", \"玛格丽特_ZH\", \"埃勒曼_ZH\", \"羽生田千鹤_ZH\", \"宛烟_ZH\", \"海妮耶_ZH\", \"科尔特_ZH\", \"霍夫曼_ZH\", \"一心传名刀_ZH\", \"弗洛朗_ZH\", \"佐西摩斯_ZH\", \"鹿野奈奈_ZH\", \"舒伯特_ZH\", \"天叔_ZH\", \"艾莉丝_ZH\", \"龙二_ZH\", \"芙卡洛斯_ZH\", \"莺儿_ZH\", \"嘉良_ZH\", \"珊瑚_ZH\", \"费迪南德_ZH\", \"祖莉亚·德斯特雷_ZH\", \"久利须_ZH\", \"嘉玛_ZH\", \"艾文_ZH\", \"女士_ZH\", \"丹吉尔_ZH\", \"天目十五_ZH\", \"白老先生_ZH\", \"老孟_ZH\", \"巴达维_ZH\", \"长生_ZH\", \"拉齐_ZH\", \"吴船长_ZH\", \"波洛_ZH\", \"艾伯特_ZH\", \"松浦_ZH\", \"乐平波琳_ZH\", \"埃泽_ZH\", \"阿圆_ZH\", \"莫塞伊思_ZH\", \"杜吉耶_ZH\", \"百闻_ZH\", \"石头_ZH\", \"阿拉夫_ZH\", \"博易_ZH\", \"斯坦利_ZH\", \"迈蒙_ZH\", \"掇星攫辰天君_ZH\", \"毗伽尔_ZH\", \"花角玉将_ZH\", \"恶龙_ZH\", \"知易_ZH\", \"恕筠_ZH\", \"克列门特_ZH\", \"西拉杰_ZH\", \"上杉_ZH\", \"大慈树王_ZH\", \"常九爷_ZH\", \"阿尔卡米_ZH\", \"沙扎曼_ZH\", \"田铁嘴_ZH\", \"克罗索_ZH\", \"悦_ZH\", \"阿巴图伊_ZH\", \"阿佩普_ZH\", \"埃尔欣根_ZH\", \"萨赫哈蒂_ZH\", \"塔杰·拉德卡尼_ZH\", \"安西_ZH\", \"埃舍尔_ZH\", \"萨齐因_ZH\", \"三月七_ZH\", \"陌生人_ZH\", \"丹恒_ZH\", \"希儿_ZH\", \"瓦尔特_ZH\", \"希露瓦_ZH\", \"佩拉_ZH\", \"娜塔莎_ZH\", \"布洛妮娅_ZH\", \"穹_ZH\", \"星_ZH\", \"虎克_ZH\", \"素裳_ZH\", \"克拉拉_ZH\", \"符玄_ZH\", \"白露_ZH\", \"杰帕德_ZH\", \"景元_ZH\", \"姬子_ZH\", \"藿藿_ZH\", \"桑博_ZH\", \"流萤_ZH\", \"艾丝妲_ZH\", \"卡芙卡_ZH\", \"黑天鹅_ZH\", \"桂乃芬_ZH\", \"玲可_ZH\", \"托帕_ZH\", \"彦卿_ZH\", \"浮烟_ZH\", \"黑塔_ZH\", \"驭空_ZH\", \"螺丝咕姆_ZH\", \"停云_ZH\", \"镜流_ZH\", \"帕姆_ZH\", \"卢卡_ZH\", \"史瓦罗_ZH\", \"罗刹_ZH\", \"真理医生_ZH\", \"阿兰_ZH\", \"阮•梅_ZH\", \"明曦_ZH\", \"银狼_ZH\", \"青雀_ZH\", \"乔瓦尼_ZH\", \"伦纳德_ZH\", \"公输师傅_ZH\", \"黄泉_ZH\", \"晴霓_ZH\", \"奥列格_ZH\", \"丹枢_ZH\", \"砂金_ZH\", \"尾巴_ZH\", \"寒鸦_ZH\", \"雪衣_ZH\", \"可可利亚_ZH\", \"青镞_ZH\", \"半夏_ZH\", \"银枝_ZH\", \"米沙_ZH\", \"大毫_ZH\", \"霄翰_ZH\", \"信使_ZH\", \"费斯曼_ZH\", \"爱德华医生_ZH\", \"警长_ZH\", \"猎犬家系成员_ZH\", \"绿芙蓉_ZH\", \"金人会长_ZH\", \"维利特_ZH\", \"维尔德_ZH\", \"斯科特_ZH\", \"卡波特_ZH\", \"刃_ZH\", \"岩明_ZH\", \"浣溪_ZH\", \"女声_ZH\", \"男声_ZH\", \"陆景和\", \"莫弈\", \"左然\", \"夏彦\"]\r\n\r\nlet format = \"audio-24khz-48kbitrate-mono-mp3\"\r\nlet sampleRate = 44100 // 对应24khz. 格式后带有opus的实际采样率是其2倍\r\nlet isNeedDecode = true // 是否需要解码，如 format 为 raw 请设为 false\r\nlet cnLocales = {\r\n    \"Happy\": \"开心\",\r\n    \"advertisement_upbeat\": \"广告推销\",\r\n    \"affectionate\": \"亲切\",\r\n    \"Angry\": \"生气\",\r\n    \"assistant\": \"数字助理\",\r\n    \"calm\": \"平静\",\r\n    \"chat\": \"闲聊\",\r\n    \"cheerful\": \"愉快\",\r\n    \"customerservice\": \"客户服务\",\r\n    \"depressed\": \"沮丧\",\r\n    \"disgruntled\": \"不满\",\r\n    \"documentary-narration\": \"纪录片\",\r\n    \"embarrassed\": \"尴尬\",\r\n    \"empathetic\": \"同情\",\r\n    \"envious\": \"嫉妒\",\r\n    \"excited\": \"兴奋\",\r\n    \"fearful\": \"恐惧\",\r\n    \"friendly\": \"友好\",\r\n    \"gentle\": \"温柔\",\r\n    \"hopeful\": \"希望\",\r\n    \"lyrical\": \"抒情\",\r\n    \"narration-professional\": \"专业\",\r\n    \"narration-relaxed\": \"轻松\",\r\n    \"newscast\": \"新闻\",\r\n    \"newscast-casual\": \"新闻-休闲\",\r\n    \"newscast-formal\": \"新闻-正式\",\r\n    \"poetry-reading\": \"诗歌朗诵\",\r\n    \"sad\": \"悲伤\",\r\n    \"serious\": \"严肃\",\r\n    \"shouting\": \"喊叫\",\r\n    \"sports_commentary\": \"体育\",\r\n    \"sports_commentary_excited\": \"体育-兴奋\",\r\n    \"whispering\": \"耳语\",\r\n    \"terrified\": \"恐惧\",\r\n    \"Unfriendly\": \"不友好\",\r\n}\r\nlet PluginJS = {\r\n    \"name\": \"v2.genshinvoice.top\",\r\n    \"id\": \"top.genshinvoice.v2\",\r\n    \"author\": \"CyberWon\",\r\n    \"description\": \"Genshinvoice TTSServer插件。喜欢的朋友可以来B站搜索CyberWon，给我来个一键三连+关注哦。\",\r\n    \"version\": 2,\r\n    \"onLoad\": function () {\r\n\r\n    },\r\n\r\n    \"getAudio\": function (text, locale, voice, rate, volume, pitch) {\r\n        rate = (rate * 2) - 100\r\n        pitch = pitch - 50\r\n        headers = {\r\n            \"content-type\": \"application/json\"\r\n        }\r\n        let sdpRation = ttsrv.tts.data['sdpRation']\r\n        if (!sdpRation) { sdpRation = 0.5}\r\n        let noise = ttsrv.tts.data['noise']\r\n        if (!noise) { noise = 0.6}\r\n        let noiseW = ttsrv.tts.data['noiseW']\r\n        if (!noiseW) { noiseW = 0.9}\r\n        let length = ttsrv.tts.data['length']\r\n        if (!length) { length = 1.0}\r\n        let prompt = ttsrv.tts.data['prompt']\r\n        if (!prompt) { prompt = \"\"}\r\n\r\n        jsonStr = ttsrv.httpPost(server + \"/run/predict\", JSON.stringify({\r\n         \r\n            \"data\": [text, voice,\r\n                Number(sdpRation), \r\n                Number(noise), \r\n                Number(noiseW), \r\n                Number(length), \"ZH\", null, prompt, \"Text prompt\", \"\", 0.7],\r\n            \"event_data\": null,\r\n            \"fn_index\": 0,\r\n            \"session_hash\": \"\"\r\n        }), headers)\r\n        a = JSON.parse(jsonStr.body().string())\r\n\r\n        vfile = server + \"/file=\" + a['data'][1]['name']\r\n\r\n        return ttsrv.httpGet(vfile).body().byteStream()\r\n\r\n    },\r\n}\r\n\r\nfunction checkServerConfig() {\r\n\r\n}\r\n\r\nlet ttsUrl = server\r\n\r\nfunction getAudioInternal(ssml, format) {\r\n    let headers = {\r\n        'Ocp-Apim-Subscription-Key': key,\r\n        \"X-Microsoft-OutputFormat\": format,\r\n        \"Content-Type\": \"application/ssml+xml\",\r\n    }\r\n    let resp = ttsrv.httpPost(ttsUrl, ssml, headers)\r\n    if (resp.code() !== 200) {\r\n        if (resp.code() === 401) {\r\n            throw \"401 Unauthorized 未授权，请检查密钥与区域是否正确。\"\r\n        } else if (resp.code() === 403) {\r\n            throw \"403 Forbidden 被禁止，您的Azure账户可能已被禁用。\"\r\n        }\r\n\r\n        throw \"音频获取失败: HTTP-\" + resp.code()\r\n    }\r\n\r\n    return resp.body().byteStream()\r\n}\r\n\r\n\r\n// 当前语言下的voice\r\nlet currentVoices = [(\"派蒙_ZH\", \"派蒙_ZH\"), (\"纳西妲_ZH\", \"纳西妲_ZH\"), (\"凯亚_ZH\", \"凯亚_ZH\"), (\"温迪_ZH\", \"温迪_ZH\"), (\"荒泷一斗_ZH\", \"荒泷一斗_ZH\"), (\"娜维娅_ZH\", \"娜维娅_ZH\"), (\"阿贝多_ZH\", \"阿贝多_ZH\"), (\"钟离_ZH\", \"钟离_ZH\"), (\"枫原万叶_ZH\", \"枫原万叶_ZH\"), (\"那维莱特_ZH\", \"那维莱特_ZH\"), (\"艾尔海森_ZH\", \"艾尔海森_ZH\"), (\"八重神子_ZH\", \"八重神子_ZH\"), (\"宵宫_ZH\", \"宵宫_ZH\"), (\"芙宁娜_ZH\", \"芙宁娜_ZH\"), (\"迪希雅_ZH\", \"迪希雅_ZH\"), (\"提纳里_ZH\", \"提纳里_ZH\"), (\"莱依拉_ZH\", \"莱依拉_ZH\"), (\"卡维_ZH\", \"卡维_ZH\"), (\"诺艾尔_ZH\", \"诺艾尔_ZH\"), (\"赛诺_ZH\", \"赛诺_ZH\"), (\"林尼_ZH\", \"林尼_ZH\"), (\"莫娜_ZH\", \"莫娜_ZH\"), (\"托马_ZH\", \"托马_ZH\"), (\"神里绫华_ZH\", \"神里绫华_ZH\"), (\"凝光_ZH\", \"凝光_ZH\"), (\"北斗_ZH\", \"北斗_ZH\"), (\"可莉_ZH\", \"可莉_ZH\"), (\"柯莱_ZH\", \"柯莱_ZH\"), (\"迪奥娜_ZH\", \"迪奥娜_ZH\"), (\"莱欧斯利_ZH\", \"莱欧斯利_ZH\"), (\"芭芭拉_ZH\", \"芭芭拉_ZH\"), (\"雷电将军_ZH\", \"雷电将军_ZH\"), (\"珊瑚宫心海_ZH\", \"珊瑚宫心海_ZH\"), (\"魈_ZH\", \"魈_ZH\"), (\"五郎_ZH\", \"五郎_ZH\"), (\"胡桃_ZH\", \"胡桃_ZH\"), (\"鹿野院平藏_ZH\", \"鹿野院平藏_ZH\"), (\"安柏_ZH\", \"安柏_ZH\"), (\"琴_ZH\", \"琴_ZH\"), (\"重云_ZH\", \"重云_ZH\"), (\"达达利亚_ZH\", \"达达利亚_ZH\"), (\"班尼特_ZH\", \"班尼特_ZH\"), (\"夜兰_ZH\", \"夜兰_ZH\"), (\"丽莎_ZH\", \"丽莎_ZH\"), (\"香菱_ZH\", \"香菱_ZH\"), (\"妮露_ZH\", \"妮露_ZH\"), (\"刻晴_ZH\", \"刻晴_ZH\"), (\"珐露珊_ZH\", \"珐露珊_ZH\"), (\"烟绯_ZH\", \"烟绯_ZH\"), (\"辛焱_ZH\", \"辛焱_ZH\"), (\"早柚_ZH\", \"早柚_ZH\"), (\"迪卢克_ZH\", \"迪卢克_ZH\"), (\"砂糖_ZH\", \"砂糖_ZH\"), (\"云堇_ZH\", \"云堇_ZH\"), (\"久岐忍_ZH\", \"久岐忍_ZH\"), (\"神里绫人_ZH\", \"神里绫人_ZH\"), (\"优菈_ZH\", \"优菈_ZH\"), (\"甘雨_ZH\", \"甘雨_ZH\"), (\"夏洛蒂_ZH\", \"夏洛蒂_ZH\"), (\"流浪者_ZH\", \"流浪者_ZH\"), (\"行秋_ZH\", \"行秋_ZH\"), (\"夏沃蕾_ZH\", \"夏沃蕾_ZH\"), (\"戴因斯雷布_ZH\", \"戴因斯雷布_ZH\"), (\"闲云_ZH\", \"闲云_ZH\"), (\"白术_ZH\", \"白术_ZH\"), (\"菲谢尔_ZH\", \"菲谢尔_ZH\"), (\"申鹤_ZH\", \"申鹤_ZH\"), (\"九条裟罗_ZH\", \"九条裟罗_ZH\"), (\"雷泽_ZH\", \"雷泽_ZH\"), (\"荧_ZH\", \"荧_ZH\"), (\"空_ZH\", \"空_ZH\"), (\"嘉明_ZH\", \"嘉明_ZH\"), (\"菲米尼_ZH\", \"菲米尼_ZH\"), (\"多莉_ZH\", \"多莉_ZH\"), (\"迪娜泽黛_ZH\", \"迪娜泽黛_ZH\"), (\"琳妮特_ZH\", \"琳妮特_ZH\"), (\"凯瑟琳_ZH\", \"凯瑟琳_ZH\"), (\"米卡_ZH\", \"米卡_ZH\"), (\"坎蒂丝_ZH\", \"坎蒂丝_ZH\"), (\"萍姥姥_ZH\", \"萍姥姥_ZH\"), (\"罗莎莉亚_ZH\", \"罗莎莉亚_ZH\"), (\"埃德_ZH\", \"埃德_ZH\"), (\"爱贝尔_ZH\", \"爱贝尔_ZH\"), (\"伊迪娅_ZH\", \"伊迪娅_ZH\"), (\"留云借风真君_ZH\", \"留云借风真君_ZH\"), (\"瑶瑶_ZH\", \"瑶瑶_ZH\"), (\"绮良良_ZH\", \"绮良良_ZH\"), (\"七七_ZH\", \"七七_ZH\"), (\"式大将_ZH\", \"式大将_ZH\"), (\"奥兹_ZH\", \"奥兹_ZH\"), (\"泽维尔_ZH\", \"泽维尔_ZH\"), (\"哲平_ZH\", \"哲平_ZH\"), (\"大肉丸_ZH\", \"大肉丸_ZH\"), (\"托克_ZH\", \"托克_ZH\"), (\"蒂玛乌斯_ZH\", \"蒂玛乌斯_ZH\"), (\"昆钧_ZH\", \"昆钧_ZH\"), (\"欧菲妮_ZH\", \"欧菲妮_ZH\"), (\"仆人_ZH\", \"仆人_ZH\"), (\"塞琉斯_ZH\", \"塞琉斯_ZH\"), (\"言笑_ZH\", \"言笑_ZH\"), (\"迈勒斯_ZH\", \"迈勒斯_ZH\"), (\"希格雯_ZH\", \"希格雯_ZH\"), (\"拉赫曼_ZH\", \"拉赫曼_ZH\"), (\"阿守_ZH\", \"阿守_ZH\"), (\"杜拉夫_ZH\", \"杜拉夫_ZH\"), (\"阿晃_ZH\", \"阿晃_ZH\"), (\"旁白_ZH\", \"旁白_ZH\"), (\"克洛琳德_ZH\", \"克洛琳德_ZH\"), (\"伊利亚斯_ZH\", \"伊利亚斯_ZH\"), (\"爱德琳_ZH\", \"爱德琳_ZH\"), (\"埃洛伊_ZH\", \"埃洛伊_ZH\"), (\"远黛_ZH\", \"远黛_ZH\"), (\"德沃沙克_ZH\", \"德沃沙克_ZH\"), (\"玛乔丽_ZH\", \"玛乔丽_ZH\"), (\"劳维克_ZH\", \"劳维克_ZH\"), (\"塞塔蕾_ZH\", \"塞塔蕾_ZH\"), (\"海芭夏_ZH\", \"海芭夏_ZH\"), (\"九条镰治_ZH\", \"九条镰治_ZH\"), (\"柊千里_ZH\", \"柊千里_ZH\"), (\"阿娜耶_ZH\", \"阿娜耶_ZH\"), (\"千织_ZH\", \"千织_ZH\"), (\"笼钓瓶一心_ZH\", \"笼钓瓶一心_ZH\"), (\"回声海螺_ZH\", \"回声海螺_ZH\"), (\"叶德_ZH\", \"叶德_ZH\"), (\"卡莉露_ZH\", \"卡莉露_ZH\"), (\"元太_ZH\", \"元太_ZH\"), (\"漱玉_ZH\", \"漱玉_ZH\"), (\"阿扎尔_ZH\", \"阿扎尔_ZH\"), (\"查尔斯_ZH\", \"查尔斯_ZH\"), (\"阿洛瓦_ZH\", \"阿洛瓦_ZH\"), (\"纳比尔_ZH\", \"纳比尔_ZH\"), (\"莎拉_ZH\", \"莎拉_ZH\"), (\"迪尔菲_ZH\", \"迪尔菲_ZH\"), (\"康纳_ZH\", \"康纳_ZH\"), (\"博来_ZH\", \"博来_ZH\"), (\"博士_ZH\", \"博士_ZH\"), (\"玛塞勒_ZH\", \"玛塞勒_ZH\"), (\"阿祇_ZH\", \"阿祇_ZH\"), (\"玛格丽特_ZH\", \"玛格丽特_ZH\"), (\"埃勒曼_ZH\", \"埃勒曼_ZH\"), (\"羽生田千鹤_ZH\", \"羽生田千鹤_ZH\"), (\"宛烟_ZH\", \"宛烟_ZH\"), (\"海妮耶_ZH\", \"海妮耶_ZH\"), (\"科尔特_ZH\", \"科尔特_ZH\"), (\"霍夫曼_ZH\", \"霍夫曼_ZH\"), (\"一心传名刀_ZH\", \"一心传名刀_ZH\"), (\"弗洛朗_ZH\", \"弗洛朗_ZH\"), (\"佐西摩斯_ZH\", \"佐西摩斯_ZH\"), (\"鹿野奈奈_ZH\", \"鹿野奈奈_ZH\"), (\"舒伯特_ZH\", \"舒伯特_ZH\"), (\"天叔_ZH\", \"天叔_ZH\"), (\"艾莉丝_ZH\", \"艾莉丝_ZH\"), (\"龙二_ZH\", \"龙二_ZH\"), (\"芙卡洛斯_ZH\", \"芙卡洛斯_ZH\"), (\"莺儿_ZH\", \"莺儿_ZH\"), (\"嘉良_ZH\", \"嘉良_ZH\"), (\"珊瑚_ZH\", \"珊瑚_ZH\"), (\"费迪南德_ZH\", \"费迪南德_ZH\"), (\"祖莉亚·德斯特雷_ZH\", \"祖莉亚·德斯特雷_ZH\"), (\"久利须_ZH\", \"久利须_ZH\"), (\"嘉玛_ZH\", \"嘉玛_ZH\"), (\"艾文_ZH\", \"艾文_ZH\"), (\"女士_ZH\", \"女士_ZH\"), (\"丹吉尔_ZH\", \"丹吉尔_ZH\"), (\"天目十五_ZH\", \"天目十五_ZH\"), (\"白老先生_ZH\", \"白老先生_ZH\"), (\"老孟_ZH\", \"老孟_ZH\"), (\"巴达维_ZH\", \"巴达维_ZH\"), (\"长生_ZH\", \"长生_ZH\"), (\"拉齐_ZH\", \"拉齐_ZH\"), (\"吴船长_ZH\", \"吴船长_ZH\"), (\"波洛_ZH\", \"波洛_ZH\"), (\"艾伯特_ZH\", \"艾伯特_ZH\"), (\"松浦_ZH\", \"松浦_ZH\"), (\"乐平波琳_ZH\", \"乐平波琳_ZH\"), (\"埃泽_ZH\", \"埃泽_ZH\"), (\"阿圆_ZH\", \"阿圆_ZH\"), (\"莫塞伊思_ZH\", \"莫塞伊思_ZH\"), (\"杜吉耶_ZH\", \"杜吉耶_ZH\"), (\"百闻_ZH\", \"百闻_ZH\"), (\"石头_ZH\", \"石头_ZH\"), (\"阿拉夫_ZH\", \"阿拉夫_ZH\"), (\"博易_ZH\", \"博易_ZH\"), (\"斯坦利_ZH\", \"斯坦利_ZH\"), (\"迈蒙_ZH\", \"迈蒙_ZH\"), (\"掇星攫辰天君_ZH\", \"掇星攫辰天君_ZH\"), (\"毗伽尔_ZH\", \"毗伽尔_ZH\"), (\"花角玉将_ZH\", \"花角玉将_ZH\"), (\"恶龙_ZH\", \"恶龙_ZH\"), (\"知易_ZH\", \"知易_ZH\"), (\"恕筠_ZH\", \"恕筠_ZH\"), (\"克列门特_ZH\", \"克列门特_ZH\"), (\"西拉杰_ZH\", \"西拉杰_ZH\"), (\"上杉_ZH\", \"上杉_ZH\"), (\"大慈树王_ZH\", \"大慈树王_ZH\"), (\"常九爷_ZH\", \"常九爷_ZH\"), (\"阿尔卡米_ZH\", \"阿尔卡米_ZH\"), (\"沙扎曼_ZH\", \"沙扎曼_ZH\"), (\"田铁嘴_ZH\", \"田铁嘴_ZH\"), (\"克罗索_ZH\", \"克罗索_ZH\"), (\"悦_ZH\", \"悦_ZH\"), (\"阿巴图伊_ZH\", \"阿巴图伊_ZH\"), (\"阿佩普_ZH\", \"阿佩普_ZH\"), (\"埃尔欣根_ZH\", \"埃尔欣根_ZH\"), (\"萨赫哈蒂_ZH\", \"萨赫哈蒂_ZH\"), (\"塔杰·拉德卡尼_ZH\", \"塔杰·拉德卡尼_ZH\"), (\"安西_ZH\", \"安西_ZH\"), (\"埃舍尔_ZH\", \"埃舍尔_ZH\"), (\"萨齐因_ZH\", \"萨齐因_ZH\"), (\"三月七_ZH\", \"三月七_ZH\"), (\"陌生人_ZH\", \"陌生人_ZH\"), (\"丹恒_ZH\", \"丹恒_ZH\"), (\"希儿_ZH\", \"希儿_ZH\"), (\"瓦尔特_ZH\", \"瓦尔特_ZH\"), (\"希露瓦_ZH\", \"希露瓦_ZH\"), (\"佩拉_ZH\", \"佩拉_ZH\"), (\"娜塔莎_ZH\", \"娜塔莎_ZH\"), (\"布洛妮娅_ZH\", \"布洛妮娅_ZH\"), (\"穹_ZH\", \"穹_ZH\"), (\"星_ZH\", \"星_ZH\"), (\"虎克_ZH\", \"虎克_ZH\"), (\"素裳_ZH\", \"素裳_ZH\"), (\"克拉拉_ZH\", \"克拉拉_ZH\"), (\"符玄_ZH\", \"符玄_ZH\"), (\"白露_ZH\", \"白露_ZH\"), (\"杰帕德_ZH\", \"杰帕德_ZH\"), (\"景元_ZH\", \"景元_ZH\"), (\"姬子_ZH\", \"姬子_ZH\"), (\"藿藿_ZH\", \"藿藿_ZH\"), (\"桑博_ZH\", \"桑博_ZH\"), (\"流萤_ZH\", \"流萤_ZH\"), (\"艾丝妲_ZH\", \"艾丝妲_ZH\"), (\"卡芙卡_ZH\", \"卡芙卡_ZH\"), (\"黑天鹅_ZH\", \"黑天鹅_ZH\"), (\"桂乃芬_ZH\", \"桂乃芬_ZH\"), (\"玲可_ZH\", \"玲可_ZH\"), (\"托帕_ZH\", \"托帕_ZH\"), (\"彦卿_ZH\", \"彦卿_ZH\"), (\"浮烟_ZH\", \"浮烟_ZH\"), (\"黑塔_ZH\", \"黑塔_ZH\"), (\"驭空_ZH\", \"驭空_ZH\"), (\"螺丝咕姆_ZH\", \"螺丝咕姆_ZH\"), (\"停云_ZH\", \"停云_ZH\"), (\"镜流_ZH\", \"镜流_ZH\"), (\"帕姆_ZH\", \"帕姆_ZH\"), (\"卢卡_ZH\", \"卢卡_ZH\"), (\"史瓦罗_ZH\", \"史瓦罗_ZH\"), (\"罗刹_ZH\", \"罗刹_ZH\"), (\"真理医生_ZH\", \"真理医生_ZH\"), (\"阿兰_ZH\", \"阿兰_ZH\"), (\"阮•梅_ZH\", \"阮•梅_ZH\"), (\"明曦_ZH\", \"明曦_ZH\"), (\"银狼_ZH\", \"银狼_ZH\"), (\"青雀_ZH\", \"青雀_ZH\"), (\"乔瓦尼_ZH\", \"乔瓦尼_ZH\"), (\"伦纳德_ZH\", \"伦纳德_ZH\"), (\"公输师傅_ZH\", \"公输师傅_ZH\"), (\"黄泉_ZH\", \"黄泉_ZH\"), (\"晴霓_ZH\", \"晴霓_ZH\"), (\"奥列格_ZH\", \"奥列格_ZH\"), (\"丹枢_ZH\", \"丹枢_ZH\"), (\"砂金_ZH\", \"砂金_ZH\"), (\"尾巴_ZH\", \"尾巴_ZH\"), (\"寒鸦_ZH\", \"寒鸦_ZH\"), (\"雪衣_ZH\", \"雪衣_ZH\"), (\"可可利亚_ZH\", \"可可利亚_ZH\"), (\"青镞_ZH\", \"青镞_ZH\"), (\"半夏_ZH\", \"半夏_ZH\"), (\"银枝_ZH\", \"银枝_ZH\"), (\"米沙_ZH\", \"米沙_ZH\"), (\"大毫_ZH\", \"大毫_ZH\"), (\"霄翰_ZH\", \"霄翰_ZH\"), (\"信使_ZH\", \"信使_ZH\"), (\"费斯曼_ZH\", \"费斯曼_ZH\"), (\"爱德华医生_ZH\", \"爱德华医生_ZH\"), (\"警长_ZH\", \"警长_ZH\"), (\"猎犬家系成员_ZH\", \"猎犬家系成员_ZH\"), (\"绿芙蓉_ZH\", \"绿芙蓉_ZH\"), (\"金人会长_ZH\", \"金人会长_ZH\"), (\"维利特_ZH\", \"维利特_ZH\"), (\"维尔德_ZH\", \"维尔德_ZH\"), (\"斯科特_ZH\", \"斯科特_ZH\"), (\"卡波特_ZH\", \"卡波特_ZH\"), (\"刃_ZH\", \"刃_ZH\"), (\"岩明_ZH\", \"岩明_ZH\"), (\"浣溪_ZH\", \"浣溪_ZH\"), (\"女声_ZH\", \"女声_ZH\"), (\"男声_ZH\", \"男声_ZH\"), (\"陆景和\", \"陆景和\"), (\"莫弈\", \"莫弈\"), (\"左然\", \"左然\"), (\"夏彦\", \"夏彦\")] // 语言技能 二级语言\r\n\r\nlet styleSpinner\r\n\r\nlet EditorJS = {\r\n    //音频的采样率 编辑TTS界面保存时调用\r\n    \"getAudioSampleRate\": function (locale, voice) {\r\n        return sampleRate\r\n    },\r\n\r\n    \"isNeedDecode\": function (locale, voice) {\r\n        return isNeedDecode\r\n    },\r\n\r\n    \"getLocales\": function () {\r\n        let locales = ['zh']\r\n\r\n        return locales\r\n    },\r\n\r\n    // 当语言变更时调用\r\n    \"getPrompts\": function (locale) {\r\n        prompts = []\r\n        // 遍历cnLocales object，push Item(k,v)\r\n        for (let k in cnLocales) {\r\n            let v = cnLocales[k]\r\n            prompts.push(Item(v, k))\r\n        }\r\n        return prompts\r\n    },\r\n\r\n    // 加载本地或网络数据，运行在IO线程。\r\n    \"onLoadData\": function () {\r\n\r\n\r\n    },\r\n    \"getVoices\": function (locale) {\r\n        currentVoices\r\n        let mm = {}\r\n        for (let [key, value] of currentVoices.entries()) {\r\n            mm[value] = new java.lang.String(value)\r\n        }\r\n        return mm\r\n    },\r\n    \"onLoadUI\": function (ctx, linerLayout) {\r\n        // let layout = new LinearLayout(ctx)\r\n        // layout.orientation = LinearLayout.HORIZONTAL // 水平布局\r\n        // let params = new LinearLayout.LayoutParams(0, LinearLayout.LayoutParams.WRAP_CONTENT, 1)\r\n        skillSpinner = JSpinner(ctx, \"语气\")\r\n        // skillSpinner.LayoutParams = params\r\n        linerLayout.addView(skillSpinner)\r\n \r\n        \r\n        ttsrv.setMargins(skillSpinner, 2, 4, 0, 0)\r\n        skillSpinner.items = this.getPrompts()\r\n        skillSpinner.setOnItemSelected(function (spinner, pos, item) {\r\n            ttsrv.tts.data['prompt'] = item.value + ''\r\n        })\r\n        skillSpinner.visibility = View.VISIBLE \r\n        let sdpRationValue = Number(ttsrv.tts.data['sdpRation'])\r\n        sdpRation = JSeekBar(ctx, \"SDP Ratio：\")\r\n        linerLayout.addView(sdpRation)\r\n        ttsrv.setMargins(sdpRation, 0, 4, 0, -4)\r\n        sdpRation.setFloatType(1) // 二位小数\r\n        sdpRation.max = 10 //最大200个刻度\r\n        if (!sdpRationValue || isNaN(sdpRationValue)) {\r\n            sdpRationValue = 0.5\r\n        }\r\n        sdpRation.value = new java.lang.Float(sdpRationValue)\r\n        sdpRation.setOnChangeListener({\r\n            // 开始时\r\n            onStartTrackingTouch: function (seek) {\r\n\r\n            },\r\n            // 进度滑动更改时\r\n            onProgressChanged: function (seek, progress, fromUser) {\r\n\r\n            },\r\n            // 停止时\r\n            onStopTrackingTouch: function (seek) {\r\n                ttsrv.tts.data['sdpRation'] = Number(seek.value).toFixed(1)\r\n            },\r\n        })\r\n        sdpRation.visibility = View.VISIBLE\r\n\r\n\r\n        noise = JSeekBar(ctx, \"Noise：\")\r\n        linerLayout.addView(noise)\r\n        ttsrv.setMargins(noise, 0, 4, 0, -4)\r\n        noise.setFloatType(1) // 二位小数\r\n        noise.max = 20 //最大200个刻度\r\n        let noiseValue = Number(ttsrv.tts.data['noise'])\r\n        if (!noiseValue || isNaN(noiseValue)) {\r\n            noiseValue = 0.6\r\n        }\r\n        noise.value = new java.lang.Float(noiseValue)\r\n        noise.setOnChangeListener({\r\n            // 开始时\r\n            onStartTrackingTouch: function (seek) {\r\n\r\n            },\r\n            // 进度滑动更改时\r\n            onProgressChanged: function (seek, progress, fromUser) {\r\n\r\n            },\r\n            // 停止时\r\n            onStopTrackingTouch: function (seek) {\r\n                ttsrv.tts.data['noise'] = Number(seek.value).toFixed(1)\r\n            },\r\n        })\r\n        noise.visibility = View.VISIBLE\r\n\r\n        // Noise_W\r\n        noiseW = JSeekBar(ctx, \"Noise_W：\")\r\n        linerLayout.addView(noiseW)\r\n        ttsrv.setMargins(noiseW, 0, 4, 0, -4)\r\n        noiseW.setFloatType(1)\r\n        noiseW.max = 20\r\n        let noiseWValue = Number(ttsrv.tts.data['noiseW'])\r\n        if (!noiseWValue || isNaN(noiseWValue)) {\r\n            noiseWValue = 0.9\r\n        }\r\n        noiseW.value = new java.lang.Float(noiseWValue)\r\n        noiseW.setOnChangeListener({\r\n            // 开始时\r\n            onStartTrackingTouch: function (seek) {\r\n\r\n            },\r\n            // 进度滑动更改时\r\n            onProgressChanged: function (seek, progress, fromUser) {\r\n\r\n            },\r\n            // 停止时\r\n            onStopTrackingTouch: function (seek) {\r\n                ttsrv.tts.data['noiseW'] = Number(seek.value).toFixed(1)\r\n            },\r\n        })\r\n        noiseW.visibility = View.VISIBLE\r\n        // length\r\n        length = JSeekBar(ctx, \"Length：\")\r\n        linerLayout.addView(length)\r\n        ttsrv.setMargins(length, 0, 4, 0, -4)\r\n        length.setFloatType(1)\r\n        length.max = 20\r\n        let lengthValue = Number(ttsrv.tts.data['length'])\r\n        if (!lengthValue || isNaN(lengthValue)) {\r\n            lengthValue = 1.0\r\n        }\r\n        length.value = new java.lang.Float(lengthValue)\r\n        length.setOnChangeListener({\r\n            // 开始时\r\n            onStartTrackingTouch: function (seek) {\r\n\r\n            },\r\n            // 进度滑动更改时\r\n            onProgressChanged: function (seek, progress, fromUser) {\r\n\r\n            },\r\n            // 停止时\r\n            onStopTrackingTouch: function (seek) {\r\n                ttsrv.tts.data['length'] = Number(seek.value).toFixed(1)\r\n            },\r\n\r\n        })\r\n        length.visibility = View.VISIBLE\r\n\r\n\r\n\r\n    },\r\n\r\n    \"onVoiceChanged\": function (locale, voiceCode) {\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\nlet isZh = java.util.Locale.getDefault().getLanguage() == 'zh'\r\n\r\nfunction getString(key) {\r\n    if (isZh) {\r\n        return cnLocales[key.toLowerCase()] || key\r\n    } else {\r\n        return key\r\n    }\r\n}"
  }
]